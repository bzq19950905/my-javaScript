<!doctype html>
<html>

<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
#div1{width:100px;height:100px;background:#f00;position:absolute;right:0;top:0;filter:alpha(opacity=0);opacity:0;}
</style>
<script src="move.js"></script>
<script>
window.onload = function(){
	var oDiv = document.getElementById("div1");
	var iTimer = null;
	
	setTop();
	window.onscroll = function(){
		setTop();
	}
	
	//点击返回
	oDiv.onclick = function(){
		clearInterval(iTimer);
		var iCur = iSpeed = 0;		//滚动条的当前值、速度初始化都为0
		iTimer = setInterval(function(){
			iCur = document.documentElement.scrollTop || document.body.scrollTop;
			// 速度
			iSpeed = Math.floor( ( 0 - iCur ) / 8 );
			if( iCur == 0 ){
				// 等于0，说明运动到顶部了，否则就给滚动条赋值
				clearInterval(iTimer);
			}else{
				document.documentElement.scrollTop = document.body.scrollTop = iCur + iSpeed;
			}
		},30)
	}
	
	function setTop(){
		var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;					//滚动条的距离
		oDiv.style.top = scrollTop + document.documentElement.clientHeight - oDiv.offsetHeight + "px";	//滚动条+可视区-元素高
		if( scrollTop<100 ){
			startMove(oDiv,{opacity:0},function(){
				oDiv.style.display = "none";
			});
		}else{
			oDiv.style.display = "block";
			startMove(oDiv,{opacity:100});
		}
	}
}
</script>
</head>

<body style="height:3000px">

    <div id="div1"></div>
    
</body>
</html>
