<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div id="ElongLogin" class="formbox">   
        <div class="inputbox login_id">
              <span class="icon"></span>
              <input class="blur" type="text" id="UserName" value="用户名/卡号/手机号/邮箱">
              <div class="input_tip" name="input_error_tip" style="display: none;">    您输入的用户名和密码不匹配，请重新输入！
              </div>
        </div>
        <div class="inputbox login_pw" style="" id="input_password">
            <span class="icon"></span>
            <input class="blur" type="password" method="PassWord" id="PassWord">
            <div class="input_tip" name="input_error_tip" style="display: none;">您输入的密码和用户名不匹配，请重新输入！
            </div>
        </div>
	  <div class="inputbox">
	  	  <input class="test" type="text" value="验证码" id="ValidateCode">
	  	  <p class="test-wrap">QNMP</p>
	  	  <a href="#?" id="ValidateHref">换一张</a>
	  	  <div class="input_tip input_tip_yzm" id="validate_result" style="display: none;">您输入的验证码有误</div>
	  </div>
        <a class="loginbtn" href="#?" usable="true" method="LoginSubmit">登录</a>
    </div>
    <script src="jquery.js"></script>
    <script>
       // 不允许修改与样式！！！！！！！！！！！！！！！！
       // 如果验证码错误，提示您输入的验证码有误
       // 只有当用户名和密码与users中的任何一个对象内完全相等时，表明登陆成功。
       // 如果用户名错误，在用户名框下方提示您输入的用户名和密码不匹配，请重新输入
       // 如果用户名正确，密码错误，在密码框下方提示您输入的密码和用户名不匹配，请重新输入！
       // ======所有信息提示，样式已经写好，还需做显示隐藏，请看DOM结构========
       //、点击“换一张”按钮在26个子母中随机生成4位大写字母显示出来。
       // 如果用户名、密码、验证码均填写正确，跳转到login.html页面中，将用户填写的用户名和密码以?参数=参数值的形式传递过去，中文需编码。
       var users = [
           {
           	   username:"张三",
           	   password:"zhangsan123"
           },
           {
           	   username:"李四",
           	   password:"123987li"
           },
           {
           	   username:"王五",
           	   password:"wang_wu55"
           }
       ] 
 
$(document).ready(function(){

var arr="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  $("#ValidateHref").on("click",function(){
   var add="";
   for(var i=0;i<4;i++){
    var rand=Math.ceil(Math.random()*26)-1;
        add+=arr[rand];
   }    
    $(".test-wrap").text(add);  
  })


var beelo;
$("#ValidateCode").on("blur",function(){
  var tex=$(".test-wrap").text(),coud=$("#ValidateCode").val();
  if(tex==coud){
    beelo=true;
    $("#validate_result").hide();
  }else{
    beelo=false;
    $("#validate_result").show();
  }
})
  
  $(".loginbtn").on("click",function(){
    var name=$("#UserName").val(),word=$("#PassWord").val()  ,yzm=$("#ValidateCode").val();    
        if(beelo){
          $.each(users,function(i,val){  
              if(val["username"]==name){
                if(word==val["password"]){
                  // var sr="#?"+name+"="+word;
                  var sr="login.html"+"#?"+name+"="+word;
                  $(".loginbtn").attr("href",sr);
                }else{
                  $("#PassWord").next().show();
                }
              }
          })
        }
  })
$("input").on("focus",function(){
  console.log(242)
   $(this).parent().children(".input_tip").hide();
})

// $(".blur").on("blur",function(){
 
//   $.each(users,function(i,val){  
//     if($(this).val()==val["username"]){
//       $(this).next().hide();
//     }
   
//   })
// })





})



    </script>
</body>
</html>